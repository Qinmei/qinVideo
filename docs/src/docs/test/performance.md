## 性能测试

主要是对于建站所需的硬件以及性能做一个简单的评估, 以便后续及时升级服务器

## 硬件

cms 其实主要是数据库的增删改查, 所以对于 CPU 的要求会比较高, 对于内存的要求则比较低;

同时并发数一旦比较高, 就会导致 CPU 占用过高, 如果是阿里云 t5 就会导致后续降频, 所以从长远考虑, 还是不要买这种突发性的服务器;

## 基准性能

测试机器为：阿里云新手套餐 2.0，2 核 8G，也就是无 CPU 限制的那款；

番剧数量在 1200 左右的测试结果为：

|     说明     |    结果    |
| :----------: | :--------: |
| 有缓存的接口 | 300~500QPS |
| 无缓存的接口 | 30QPS 左右 |

有缓存指的是 redis 直接返回了结果， 而不用再次查询；

QPS 指的是每秒请求数，以 30 为例，那么每天的总请求数为：30*3600*24 = 2592000， 也就是 260 万，想要达到这个量级， 日活最起码也要 1W 用户了，更别说加上缓存之后， 所以足够支撑一个 10W 用户的站点了;

## 内存

由于 redis 的数据是存储在内存中，如果你的数据量比较大，redis 占用的空间也会比较大，内存可能就需要适当提高点；

另外根据番剧的数量以及用户数量的不同, 所需的要求也不一致;

如果注册用户在 5K 以内, 上架番剧在 1K 以内, 那么 1 核 2G 的服务器应该是足够的;

如果你的用户数超过 1W 并小于 10W, 那么适当延长缓存的时间, 2 核 4G 的机器可以应对大部分的情况, 但是某个时间段如晚上高峰期, 可能会导致占用过高, 响应时间变慢;

## 注意

后台的接口为了保证功能以及实时性, 没有做任何的缓存, 所以后台的接口会比较占用资源, 如果用户量太多, 请尽量避免在高峰时打开后台管理

## 总结

从目前的测试结果来看，是能够满足绝大部分站点的需求的，当然如果你的数据量超过了这个上限，你自然会找专人去处理优化， 所以也无须太过担心；
